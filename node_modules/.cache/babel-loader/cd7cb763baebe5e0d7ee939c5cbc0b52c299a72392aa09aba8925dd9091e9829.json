{"ast":null,"code":"'use strict';\n\n// * Breaks proxying into a series of discrete steps, many of which can be swapped out by authors.\n// * Uses Promises to support async.\n// * Uses a quasi-Global called Container to tidy up the argument passing between the major work-flow steps.\nvar ScopeContainer = require('./lib/scopeContainer');\nvar assert = require('assert');\nvar debug = require('debug')('express-http-proxy');\nvar buildProxyReq = require('./app/steps/buildProxyReq');\nvar copyProxyResHeadersToUserRes = require('./app/steps/copyProxyResHeadersToUserRes');\nvar decorateProxyReqBody = require('./app/steps/decorateProxyReqBody');\nvar decorateProxyReqOpts = require('./app/steps/decorateProxyReqOpts');\nvar decorateUserRes = require('./app/steps/decorateUserRes');\nvar decorateUserResHeaders = require('./app/steps/decorateUserResHeaders');\nvar filterUserRequest = require('./app/steps/filterUserRequest');\nvar handleProxyErrors = require('./app/steps/handleProxyErrors');\nvar maybeSkipToNextHandler = require('./app/steps/maybeSkipToNextHandler');\nvar prepareProxyReq = require('./app/steps/prepareProxyReq');\nvar resolveProxyHost = require('./app/steps/resolveProxyHost');\nvar resolveProxyReqPath = require('./app/steps/resolveProxyReqPath');\nvar sendProxyRequest = require('./app/steps/sendProxyRequest');\nvar sendUserRes = require('./app/steps/sendUserRes');\nmodule.exports = function proxy(host, userOptions) {\n  assert(host, 'Host should not be empty');\n  return function handleProxy(req, res, next) {\n    debug('[start proxy] ' + req.path);\n    var container = new ScopeContainer(req, res, next, host, userOptions);\n    filterUserRequest(container).then(buildProxyReq).then(resolveProxyHost).then(decorateProxyReqOpts).then(resolveProxyReqPath).then(decorateProxyReqBody).then(prepareProxyReq).then(sendProxyRequest).then(maybeSkipToNextHandler).then(copyProxyResHeadersToUserRes).then(decorateUserResHeaders).then(decorateUserRes).then(sendUserRes).catch(function (err) {\n      // I sometimes reject without an error to shortcircuit the remaining\n      // steps and return control to the host application.\n\n      if (err) {\n        var resolver = container.options.proxyErrorHandler ? container.options.proxyErrorHandler : handleProxyErrors;\n        resolver(err, res, next);\n      } else {\n        next();\n      }\n    });\n  };\n};","map":{"version":3,"names":["ScopeContainer","require","assert","debug","buildProxyReq","copyProxyResHeadersToUserRes","decorateProxyReqBody","decorateProxyReqOpts","decorateUserRes","decorateUserResHeaders","filterUserRequest","handleProxyErrors","maybeSkipToNextHandler","prepareProxyReq","resolveProxyHost","resolveProxyReqPath","sendProxyRequest","sendUserRes","module","exports","proxy","host","userOptions","handleProxy","req","res","next","path","container","then","catch","err","resolver","options","proxyErrorHandler"],"sources":["E:/CLG/Projects/my_portfolio/node_modules/express-http-proxy/index.js"],"sourcesContent":["'use strict';\n\n// * Breaks proxying into a series of discrete steps, many of which can be swapped out by authors.\n// * Uses Promises to support async.\n// * Uses a quasi-Global called Container to tidy up the argument passing between the major work-flow steps.\n\nvar ScopeContainer = require('./lib/scopeContainer');\nvar assert = require('assert');\nvar debug = require('debug')('express-http-proxy');\n\nvar buildProxyReq                = require('./app/steps/buildProxyReq');\nvar copyProxyResHeadersToUserRes = require('./app/steps/copyProxyResHeadersToUserRes');\nvar decorateProxyReqBody         = require('./app/steps/decorateProxyReqBody');\nvar decorateProxyReqOpts         = require('./app/steps/decorateProxyReqOpts');\nvar decorateUserRes              = require('./app/steps/decorateUserRes');\nvar decorateUserResHeaders       = require('./app/steps/decorateUserResHeaders');\nvar filterUserRequest            = require('./app/steps/filterUserRequest');\nvar handleProxyErrors            = require('./app/steps/handleProxyErrors');\nvar maybeSkipToNextHandler       = require('./app/steps/maybeSkipToNextHandler');\nvar prepareProxyReq              = require('./app/steps/prepareProxyReq');\nvar resolveProxyHost             = require('./app/steps/resolveProxyHost');\nvar resolveProxyReqPath          = require('./app/steps/resolveProxyReqPath');\nvar sendProxyRequest             = require('./app/steps/sendProxyRequest');\nvar sendUserRes                  = require('./app/steps/sendUserRes');\n\nmodule.exports = function proxy(host, userOptions) {\n  assert(host, 'Host should not be empty');\n\n  return function handleProxy(req, res, next) {\n    debug('[start proxy] ' + req.path);\n    var container = new ScopeContainer(req, res, next, host, userOptions);\n\n    filterUserRequest(container)\n      .then(buildProxyReq)\n      .then(resolveProxyHost)\n      .then(decorateProxyReqOpts)\n      .then(resolveProxyReqPath)\n      .then(decorateProxyReqBody)\n      .then(prepareProxyReq)\n      .then(sendProxyRequest)\n      .then(maybeSkipToNextHandler)\n      .then(copyProxyResHeadersToUserRes)\n      .then(decorateUserResHeaders)\n      .then(decorateUserRes)\n      .then(sendUserRes)\n      .catch(function (err) {\n        // I sometimes reject without an error to shortcircuit the remaining\n        // steps and return control to the host application.\n\n        if (err) {\n          var resolver = (container.options.proxyErrorHandler) ?\n            container.options.proxyErrorHandler :\n            handleProxyErrors;\n          resolver(err, res, next);\n        } else {\n          next();\n        }\n      });\n  };\n};\n\n"],"mappings":"AAAA,YAAY;;AAEZ;AACA;AACA;AAEA,IAAIA,cAAc,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACpD,IAAIC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAC9B,IAAIE,KAAK,GAAGF,OAAO,CAAC,OAAO,CAAC,CAAC,oBAAoB,CAAC;AAElD,IAAIG,aAAa,GAAkBH,OAAO,CAAC,2BAA2B,CAAC;AACvE,IAAII,4BAA4B,GAAGJ,OAAO,CAAC,0CAA0C,CAAC;AACtF,IAAIK,oBAAoB,GAAWL,OAAO,CAAC,kCAAkC,CAAC;AAC9E,IAAIM,oBAAoB,GAAWN,OAAO,CAAC,kCAAkC,CAAC;AAC9E,IAAIO,eAAe,GAAgBP,OAAO,CAAC,6BAA6B,CAAC;AACzE,IAAIQ,sBAAsB,GAASR,OAAO,CAAC,oCAAoC,CAAC;AAChF,IAAIS,iBAAiB,GAAcT,OAAO,CAAC,+BAA+B,CAAC;AAC3E,IAAIU,iBAAiB,GAAcV,OAAO,CAAC,+BAA+B,CAAC;AAC3E,IAAIW,sBAAsB,GAASX,OAAO,CAAC,oCAAoC,CAAC;AAChF,IAAIY,eAAe,GAAgBZ,OAAO,CAAC,6BAA6B,CAAC;AACzE,IAAIa,gBAAgB,GAAeb,OAAO,CAAC,8BAA8B,CAAC;AAC1E,IAAIc,mBAAmB,GAAYd,OAAO,CAAC,iCAAiC,CAAC;AAC7E,IAAIe,gBAAgB,GAAef,OAAO,CAAC,8BAA8B,CAAC;AAC1E,IAAIgB,WAAW,GAAoBhB,OAAO,CAAC,yBAAyB,CAAC;AAErEiB,MAAM,CAACC,OAAO,GAAG,SAASC,KAAKA,CAACC,IAAI,EAAEC,WAAW,EAAE;EACjDpB,MAAM,CAACmB,IAAI,EAAE,0BAA0B,CAAC;EAExC,OAAO,SAASE,WAAWA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC1CvB,KAAK,CAAC,gBAAgB,GAAGqB,GAAG,CAACG,IAAI,CAAC;IAClC,IAAIC,SAAS,GAAG,IAAI5B,cAAc,CAACwB,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAEL,IAAI,EAAEC,WAAW,CAAC;IAErEZ,iBAAiB,CAACkB,SAAS,CAAC,CACzBC,IAAI,CAACzB,aAAa,CAAC,CACnByB,IAAI,CAACf,gBAAgB,CAAC,CACtBe,IAAI,CAACtB,oBAAoB,CAAC,CAC1BsB,IAAI,CAACd,mBAAmB,CAAC,CACzBc,IAAI,CAACvB,oBAAoB,CAAC,CAC1BuB,IAAI,CAAChB,eAAe,CAAC,CACrBgB,IAAI,CAACb,gBAAgB,CAAC,CACtBa,IAAI,CAACjB,sBAAsB,CAAC,CAC5BiB,IAAI,CAACxB,4BAA4B,CAAC,CAClCwB,IAAI,CAACpB,sBAAsB,CAAC,CAC5BoB,IAAI,CAACrB,eAAe,CAAC,CACrBqB,IAAI,CAACZ,WAAW,CAAC,CACjBa,KAAK,CAAC,UAAUC,GAAG,EAAE;MACpB;MACA;;MAEA,IAAIA,GAAG,EAAE;QACP,IAAIC,QAAQ,GAAIJ,SAAS,CAACK,OAAO,CAACC,iBAAiB,GACjDN,SAAS,CAACK,OAAO,CAACC,iBAAiB,GACnCvB,iBAAiB;QACnBqB,QAAQ,CAACD,GAAG,EAAEN,GAAG,EAAEC,IAAI,CAAC;MAC1B,CAAC,MAAM;QACLA,IAAI,CAAC,CAAC;MACR;IACF,CAAC,CAAC;EACN,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}