{"ast":null,"code":"'use strict';\n\nvar getHeaders = require('../../lib/getHeaders');\nfunction decorateUserResHeaders(container) {\n  var resolverFn = container.options.userResHeaderDecorator;\n  var headers = getHeaders(container.user.res);\n  if (!resolverFn) {\n    return Promise.resolve(container);\n  }\n  const clearAllHeaders = res => {\n    for (const header in getHeaders(res)) {\n      res.removeHeader(header);\n    }\n  };\n  return Promise.resolve(resolverFn(headers, container.user.req, container.user.res, container.proxy.req, container.proxy.res)).then(function (headers) {\n    return new Promise(function (resolve) {\n      clearAllHeaders(container.user.res);\n      container.user.res.set(headers);\n      resolve(container);\n    });\n  });\n}\nmodule.exports = decorateUserResHeaders;","map":{"version":3,"names":["getHeaders","require","decorateUserResHeaders","container","resolverFn","options","userResHeaderDecorator","headers","user","res","Promise","resolve","clearAllHeaders","header","removeHeader","req","proxy","then","set","module","exports"],"sources":["E:/CLG/Projects/my_portfolio/node_modules/express-http-proxy/app/steps/decorateUserResHeaders.js"],"sourcesContent":["'use strict';\nvar getHeaders = require('../../lib/getHeaders');\n\nfunction decorateUserResHeaders(container) {\n  var resolverFn = container.options.userResHeaderDecorator;\n  var headers = getHeaders(container.user.res);\n\n  if (!resolverFn) {\n    return Promise.resolve(container);\n  }\n\n  const clearAllHeaders = (res) => {\n    for (const header in getHeaders(res)) {\n      res.removeHeader(header);\n    }\n  };\n\n  return Promise\n    .resolve(resolverFn(headers, container.user.req, container.user.res, container.proxy.req, container.proxy.res))\n    .then(function (headers) {\n      return new Promise(function (resolve) {\n        clearAllHeaders(container.user.res);\n        container.user.res.set(headers);\n        resolve(container);\n      });\n    });\n}\n\nmodule.exports = decorateUserResHeaders;\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,UAAU,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AAEhD,SAASC,sBAAsBA,CAACC,SAAS,EAAE;EACzC,IAAIC,UAAU,GAAGD,SAAS,CAACE,OAAO,CAACC,sBAAsB;EACzD,IAAIC,OAAO,GAAGP,UAAU,CAACG,SAAS,CAACK,IAAI,CAACC,GAAG,CAAC;EAE5C,IAAI,CAACL,UAAU,EAAE;IACf,OAAOM,OAAO,CAACC,OAAO,CAACR,SAAS,CAAC;EACnC;EAEA,MAAMS,eAAe,GAAIH,GAAG,IAAK;IAC/B,KAAK,MAAMI,MAAM,IAAIb,UAAU,CAACS,GAAG,CAAC,EAAE;MACpCA,GAAG,CAACK,YAAY,CAACD,MAAM,CAAC;IAC1B;EACF,CAAC;EAED,OAAOH,OAAO,CACXC,OAAO,CAACP,UAAU,CAACG,OAAO,EAAEJ,SAAS,CAACK,IAAI,CAACO,GAAG,EAAEZ,SAAS,CAACK,IAAI,CAACC,GAAG,EAAEN,SAAS,CAACa,KAAK,CAACD,GAAG,EAAEZ,SAAS,CAACa,KAAK,CAACP,GAAG,CAAC,CAAC,CAC9GQ,IAAI,CAAC,UAAUV,OAAO,EAAE;IACvB,OAAO,IAAIG,OAAO,CAAC,UAAUC,OAAO,EAAE;MACpCC,eAAe,CAACT,SAAS,CAACK,IAAI,CAACC,GAAG,CAAC;MACnCN,SAAS,CAACK,IAAI,CAACC,GAAG,CAACS,GAAG,CAACX,OAAO,CAAC;MAC/BI,OAAO,CAACR,SAAS,CAAC;IACpB,CAAC,CAAC;EACJ,CAAC,CAAC;AACN;AAEAgB,MAAM,CAACC,OAAO,GAAGlB,sBAAsB"},"metadata":{},"sourceType":"script","externalDependencies":[]}